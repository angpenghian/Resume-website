<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatiable" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PengHian's Portfolio Website</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://kit.fontawesome.com/51e67edaa9.js" crossorigin="anonymous"></script>
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism.min.css" rel="stylesheet" />
  </head>
  <body>
    <div id="header">
      <div class="container">
        <nav>
          <img src="../../images-folder/resume-website-images/logo.png" class="logo" />
          <ul id="sidemenu">
            <li><a href="../../index.html#header">Home</a></li>
            <li><a href="../../index.html#about">About</a></li>
            <li><a href="../../index.html#services">Services</a></li>
            <li><a href="../../index.html#portfolio">Portfolio</a></li>
            <li><a href="../../index.html#contact">Contact</a></li>
            <i class="fa-solid fa-xmark" onclick="closemenu()"></i>
          </ul>
          <i class="fa-solid fa-bars" onclick="openmenu()"></i>
        </nav>
      </div>
    </div>
    <!----------------------------------------blog---------------------------------------->
    <div class="content">
      <div class="container">
        <div class="blog">
          <h1 class="sub-title">
            Building a Resume Website on AWS.
            Using Nginx, Terraform, Kubernetes,
            Docker, Jenkins and Sonarqube.
          </h1>
          <h2>PengHian Ang</h2>
          <h3>June 7, 2023</h3>
          <p>
            My primary objective for this project is to demonstrate my expertise
            as a DevOps Engineer while expanding my technical skill set. I
            believe that true learning happens through hands-on experience and
            problem-solving.
          </p>
          <p>
            Therefore, I will actively engage in the development process to
            showcase my knowledge and improve my abilities along the way.
          </p>
          <p>
            Additionally, I aim for this project to serve as a comprehensive
            guide for individuals looking to establish their own DevOps
            infrastructure. By documenting the entire process and sharing my
            experiences, I hope to provide valuable insights and practical
            instructions that can assist others in successfully implementing
            similar systems.
          </p>
          <h4>Prerequisites</h4>
          <ol>
            <li>
              <strong>AWS Account:</strong>
              <p>
                An AWS account is essential for using Terraform to build
                projects. It allows Terraform to interact with and manage AWS
                resources, facilitating infrastructure provisioning and
                management.
              </p>
            </li>
            <li>
              <strong>Terraform Installed:</strong>
              <p>
                Terraform must be installed on your computer to build this
                project. Terraform is an infrastructure-as-code (IaC) tool that
                automates and manages cloud resources. Installing Terraform on
                your PC enables you to define your infrastructure as code and
                deploy it to AWS.
              </p>
            </li>
            <li>
              <strong>Git Installed:</strong>
              <p>
                Git must be installed on your computer to clone the project from
                my GitHub repository. Git is a version control system that
                facilitates efficient collaboration and code change tracking.
              </p>
            </li>
          </ol>
          <h4>Deciding the Infrastructure Setup</h4>
          <p>
            For this stage of the project <span style="color: #0050ef">(hightlighted in blue)</span>, I have chosen the following
            infrastructure setup. The image below illustrates the setup:
            <img src="../../images-folder/resume-website-images/current-setup.png" alt="Infrastructure Image" />
          </p>
          <ul>
            <li><span>Terraform: </span>For AWS resource creation.</li>
            <li>
              <span>CloudFront: </span>To boost user experience with caching
              services.
            </li>
            <li>
              <span>Route 53 and AWS Certificate Manager: </span>For DNS
              management and SSL certificate configuration for angpenghian.com.
            </li>
            <li>
              <span>AWS Application Load Balancer: </span>Load balancing across
              EC2 instances, currently a single instance for proof of concept.
            </li>
            <li>
              <span>AWS Internet Gateway: </span>Provides internet access to VPC
              resources.
            </li>
            <li>
              <span>Kubernetes cluster: </span>Consists of a master and a worker
              node. NGINX deployment on worker node, leveraging PV and PVC for
              file reading on EC2 server. Service made public via NodePort.
            </li>
          </ul>
          <h4>instructions:</h4>
          <ol>
            <li><strong>Choose a command terminal</strong>
              <p>
                Open a terminal (Command Prompt on Windows, Terminal on Mac or
                Linux).
              </p>
            </li>
            <br/>
            <li><strong>Choose a base folder</strong>
              <p>
              Navigate to the empty folder where you want to clone the
              repository. You can use the cd (change directory) command to do
              this. For example:
              <pre class="codebox"><code class="language-bash" id="code1">cd /path/to/your/folder</code></pre>
              <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
              </p>
            </li>
            <br/>
            <li><strong>Clone the repository</strong>
              <p>
              Once you're in the right directory, use the git clone command
              followed by the URL of the repository:
              <pre class="codebox"><code class="language-git" id="sample-code">git clone https://github.com/angpenghian/resume.git</code></pre>
              <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
              </p>
            </li>
            <br/>
            <li><strong>Navigate to nessary folder</strong>
              <p>
              After cloning the GitHub repository, use the subsequent command to
              navigate to the terraform directory that includes the necessary
              Terraform and Bash scripts for configuring the infrastructure.
              <pre class="codebox"><code class="language-bash" id="sample-code">cd /Your Folder Directory/Resume-website/</code></pre>
              <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
              </p>
            </li>
            <br/>
            <li><strong>Create secrets folder</strong>
              <p>
              First, create a new directory called 'secrets' manually or using the command
              below:
              <pre class="codebox"><code class="language-bash" id="sample-code">mkdir secrets</code></pre>
              <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
              </p>
            </li>
            <br/>
            <li><strong>Configure and obtain AWS credentials</strong>
              <p>
              Next, log into your AWS root user account. Use the console's
              search bar to find the IAM service.
              <img src="../../images-folder/resume-website-images/aws-iam-search.png" />
              Inside the IAM interface, navigate to the Users section and choose
              'Add users'.
              <img src="../../images-folder/resume-website-images/aws-iam-users.png" />
              Follow the on-screen instructions to create your IAM user.
              <img src="../../images-folder/resume-website-images/aws-iam-testing.png" />
              Once the user is created, click on it. In the 'Security
              credentials' tab, find 'Create access key'.
              <img src="../../images-folder/resume-website-images/aws-iam-user-testing.png" />
              <img src="../../images-folder/resume-website-images/aws-iam-key.png" />
              It's crucial to save and document both keys for future reference.
              <img src="../../images-folder/resume-website-images/aws-key.png" />
              </p>
            </li>
            <br/>
            <li><strong>Configure and obtain AWS key pairs</strong>
              <p>
              Now, create a key pair to enable SSH access into the AWS EC2
              machines you'll be making. Use the console's search bar to find
              "Key pairs".
              <img src="../../images-folder/resume-website-images/aws-keypairs-search.png" />
              In the Key pairs section, select Create key pair. Take note of the
              region you're in because key pairs are region-specific.
              <img src="../../images-folder/resume-website-images/aws-keypairs-create.png" />
              After selecting "Create key pair", input your preferred key name.
              <img src="../../images-folder/resume-website-images/aws-createkey.png" />
              Upon completion, the key pair will be generated and a .pem file
              will be downloaded.
              <img src="../../images-folder/resume-website-images/aws-createkey-finish.png" />
              </p>
            </li>
            <br/>
            <li><strong>Place secrets and key pair</strong>
              <p>
              Afterward, save the access keys and key pairs in the given format
              within the 'secrets' directory.
              <img src="../../images-folder/resume-website-images/folder.png" />
              </p>
            </li>
            <li><strong>Setup Terraform</strong>
              <p>
              Now that your security credentials are properly set up, there are
              still a few files you need to edit for the Terraform setup.
              <img src="../../images-folder/resume-website-images/aws-terraform-p1.png" />
              </p>
            </li>
            <br/>
            <li><strong>Configure terraform provider</strong>
              <p>
              In the provider file, you can modify the access key location if
              you've stored it elsewhere.
              <img src="../../images-folder/resume-website-images/providertf.png" />
              </p>
            </li>
            <br/>
            <li><strong>Configure terraform variables</strong>
              <p>
              For terraform.tfvars, you can modify parameters such as the EC2
              machine image, your instance type, private key path, the domain
              you're using, and a validated SSL certificate ARN from AWS Cert
              Manager.
              <img src="../../images-folder/resume-website-images/tfvars.png" />
              </p>
            </li>
            <br/>
            <li><strong>Initialize terraform</strong>
              <p>
              Once you've finished editing the files, you can initialize the terraform directory.
              navigate to the terraform directory (Resume-website > terraform > server-based) that includes the necessary Terraform and Bash scripts for configuring the infrastructure.
              Than type the following command:
              <pre class="codebox"><code class="language-bash" id="sample-code">terraform init</code></pre>
              <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
              <img src="../../images-folder/resume-website-images/terraform-init.png" />
              </p>
            </li>
            <br/>
            <li><strong>Terraform install start</strong>
              <p>
              If you have cloned my repository, you would have the nessary terraform files to build the infrastructure.
              navigate to the server-based directory (Resume-website > terraform > server-based) that includes the necessary Terraform and Bash scripts for configuring the infrastructure.
              Than type the following command:
              <pre class="codebox"><code class="language-bash" id="sample-code">terraform apply</code></pre>
              <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
              <img src="../../images-folder/resume-website-images/terraform-apply.png" />
              </p>
            </li>
            <br/>
            <li><strong>Terraform install error handling</strong>
              <p>
              After running the terraform apply command, it might have a error for remote-exec.
              Type terraform apply again.
              <pre class="codebox"><code class="language-bash" id="sample-code">terraform apply</code></pre>
              <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
              <img src="../../images-folder/resume-website-images/terraform-apply-error.png" />
              <img src="../../images-folder/resume-website-images/terraform-apply-error-2.png" />
              </p>
            </li>
            <br/>
            <li><strong>Take note of kubeadm join command</strong>
              <p>
              Once the initialization is complete, you can will be able to see a kudeadm join command.
              Take note of the kubeadm-join command and the ip addresses. 
              For the example it would be:
              <pre class="codebox"><code class="language-bash" id="sample-code">sudo kubeadm join [your-ip]:6443 --token [your-token] --discovery-token-ca-cert-hash [your-hash]</code></pre>
              <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
              <img src="../../images-folder/resume-website-images/kubeadm-join.png" />
              </p>
            </li>
            <br/>
            <li><strong>Change permission for secret key</strong>
              <p>
              Now that the infrastructure is built, you would need to SSH into the EC2 instance.
              But before that we would need to change the permission of the key.pem file.
              Navigate to where you have stored your key.pem file. for me it would be Resume-website > secrets
              Type the following command:
              <pre class="codebox"><code class="language-bash" id="sample-code">chmod 400 [your-key.pem]</code></pre>
              <img src="../../images-folder/resume-website-images/chmod-400.png" />
              </p>
            </li>
            <br/>
            <li><strong>SSH into node01</strong>
              <p>
              Now that the infrastructure is built, you can access the server via SSH.
              Navigate to where you have stored your key.pem file. for me it would be Resume-website > secrets
              Currently we are trying to setup the Nginx kubernetes deployment on node01. so we would need to ssh into it.
              Type the following command:
              <pre class="codebox"><code class="language-bash" id="sample-code">ssh -i [your-key.pem] ec2-user@[your-ip]</code></pre>
              <img src="../../images-folder/resume-website-images/ssh-node01.png" />
              </p>
            </li>
            <br/>
            <li><strong>Node01 join kubernetes cluster</strong>
              <p>
              Using the previous kubeadm join command, we will now join the node01 to the kubernetes cluster.
              Type the commands saved from the previous step
              <img src="../../images-folder/resume-website-images/node01-kubeadm-join.png" />
              </p>
            </li>
            <br/>
            <li><strong>Check node node01 status</strong>
              <P>
              Now that node01 is joined to the kubernetes cluster, we can check the status of the nodes.
              Firstly we need to SSH into the masternode and use the kubernetes command to check the status of the nodes.
              Type the following commands:
              <pre class="codebox"><code class="language-bash" id="sample-code">ssh -i [your-key.pem] ec2-user@[your-ip]</code></pre>
              <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
              <pre class="codebox"><code class="language-bash" id="sample-code">kubectl get node</code></pre>
              <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
              <img src="../../images-folder/resume-website-images/ssh-masternode.png" />
              </P>
            </li>
            <br/>
            <li><strong>Navigate to kubernetes yaml file</strong>
              <p>
              We have established that node01 has joined the kubernetes cluster.
              Now we can deploy the nginx deployment.
              Firstly navigate to the nginx directory. For my example it would be /home/ec2-user/website/kubernetes-setup
              <pre class="codebox"><code class="language-bash" id="sample-code">cd /home/ec2-user/website/kubernetes-setup</code></pre>
              <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
              <img src="../../images-folder/resume-website-images/kubernetes-setup-directory.png" />
              </p>
            </li>
            <br/>
            <li><strong>Why is there website folder in the server</strong>
              <P>
              You may ask how did this website folder get into the EC2 instance.
              This is because we have used the terraform function called provisioner to copy the website folder into the EC2 instance.
              Under the terraform directory (Resume-website > terraform > server-based) there is a terraform file called 6-ec2.tf
              If need be you are able to change this according to your needs.
              <img src="../../images-folder/resume-website-images/masternode-provisioner.png" />
              </P>
            </li>
            <br/>
            <li><strong>Create nginx deployment</strong>
              <p>
              Now that we understand how the website folder got into the EC2 instance, we can now deploy the nginx deployment.
              Navigate to the kubernetes script directory. For my example it would be /home/ec2-user/website/kubernetes-setup
              Type the following command:
              <pre class="codebox"><code class="language-bash" id="sample-code">kubectl apply -f kubernetes-nginx-setup.yaml</code></pre>
              <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
              <img src="../../images-folder/resume-website-images/kubectl-apply-nginx.png" />
              </p>
            </li>
            <br/>
            <li><strong>Check nginx deployment status</strong>
              <p>
              We have now successfully deployed the nginx deployment.
              Now we can check the status of the deployment.
              Type the following command:
              <pre class="codebox"><code class="language-bash" id="sample-code">kubectl get all</code></pre>
              <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
              <img src="../../images-folder/resume-website-images/kubectl-get-all-nginx.png" />
              </p>
            </li>
            <br/>
            <li><strong>Check website</strong>
              <p>
              Check if the nginx deployment is working.
              Open a browser and type in the url
              <img src="../../images-folder/resume-website-images/website-after-nginx.png" />
              </p>
            </li>
            <br/>
            <li><strong>Domain Name</strong>
              <p>
              You might wonder how is the url is decided. Other than buying your own domain on AWS.
              In the terraform file 8-route53.tf, you can see that I have created a record set for the domain angpenghian.com
              <img src="../../images-folder/resume-website-images/route53-a-record.png" />
              </p>
            </li>
            <br/>
            <li><strong>Complete</strong>
              <p>
              We have now completed the deployment of the nginx deployment.
              Part 2 of this project will be to deploy the jenkins deployment and setup the CI/CD pipeline.
              </p>
            </li>
          </ol>
          <br/>
          <h1 class="sub-title">
            Building CI/CD for the infrastructure setup.
          </h1>
          <p>
            Now that we have completed the infrastructure setup for the nginx deployment, we can now setup the CI/CD pipeline for the infrastructure.
            For this stage of the project <span style="color: #f26161">(hightlighted in red)</span>, I have chosen the following
            infrastructure setup. The image below illustrates the setup:
            <img src="../../images-folder/resume-website-images/current-setup.png" alt="Infrastructure Image" />
          </p>
          <h4>instructions:</h4>
          <ol>
            <li><strong>Choose a command terminal</strong>
              <P>
              Open a terminal (Command Prompt on Windows, Terminal on Mac or
              Linux).
              </P>
            </li>
            <br/>
            <li><strong>SSH into Jenkins</strong>
              <p>
              If you have followed the steps from the previous stage, you would have the nessary terraform files to build the infrastructure.
              Navigate to the secrets directory (Resume-website > secrets) and SSH into the jenkins EC2 instance.
              Type the following command:
              <pre class="codebox"><code class="language-bash" id="sample-code">ssh -i [your-key.pem] ec2-user@[your-ip]</code></pre>
              <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
              <img src="../../images-folder/resume-website-images/ssh-jenkins.png" />
              </p>
            </li>
            <br/>
            <li><strong>Jenkins join kubernetes cluster</strong>
              <P>
              Now that we are inside the jenkins EC2 instance, we should join the jenkins EC2 instance to the kubernetes cluster.
              Type the following command:
              <pre class="codebox"><code class="language-bash" id="sample-code">sudo kubeadm join [your-ip]:6443 --token [your-token] --discovery-token-ca-cert-hash [your-hash]</code></pre>
              <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
              <img src="../../images-folder/resume-website-images/jenkins-kubeadm-join.png" />
              </P>
            </li>
            <br/>
            <li><strong>Check node jenkins status</strong>
              <P>
                Now that jenkins is joined to the kubernetes cluster, we can check the status of the nodes.
                Firstly we need to SSH into the masternode and use the kubernetes command to check the status of the nodes.
                Type the following commands:
                <pre class="codebox"><code class="language-bash" id="sample-code">ssh -i [your-key.pem] ec2-user@[your-ip]</code></pre>
                <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
                <pre class="codebox"><code class="language-bash" id="sample-code">kubectl get node</code></pre>
                <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
                <img src="../../images-folder/resume-website-images/ssh-masternode2.png" />
                </P>
            </li>
            <br/>
            <li><strong>Navigate to kubernetes yaml file</strong>
              <p>
              We have established that jenkins has joined the kubernetes cluster.
              Now we can deploy the jenkins deployment.
              Firstly navigate to the nginx directory. For my example it would be /home/ec2-user/website/kubernetes-setup
              <pre class="codebox"><code class="language-bash" id="sample-code">cd /home/ec2-user/website/kubernetes-setup</code></pre>
              <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
              <img src="../../images-folder/resume-website-images/kubernetes-setup-directory.png" />
              </p>
            </li>
            <br/>
            <li><strong>Create jenkins deployment</strong>
              <p>
              Navigate to the kubernetes script directory. For my example it would be /home/ec2-user/website/kubernetes-setup
              Type the following command:
              <pre class="codebox"><code class="language-bash" id="sample-code">kubectl apply -f kubernetes-jenkins-setup.yaml</code></pre>
              <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
              <img src="../../images-folder/resume-website-images/kubectl-apply-jenkins.png" />
              </p>
            </li>
            <br/>
            <li><strong>Check jenkins website</strong>
              <p>
                Check if the jenkins deployment is working. Open a browser and type in the url
              <img src="../../images-folder/resume-website-images/website-after-jenkins.png" />
              </p>
            </li>
            <br/>
            <li><strong>Domain Name</strong>
              <p>
              You might wonder how is the url is decided. Other than buying your own domain on AWS.
              In the terraform file 8-route53.tf, you can see that I have created a record set for the domain jenkins.angpenghian.com
              <img src="../../images-folder/resume-website-images/route53-a-record-jenkins.png" />
              </p>
            </li>
            <br/>
            <li><strong>SSH masternode</strong>
              <p>
                Now that we have deployed the jenkins deployment, we need to unlock the jenkins website.
                To do that we need to SSH into the masternode to get the initial admin password.
              <img src="../../images-folder/resume-website-images/ssh-masternode3.png" />
              </p>
            </li>
            <br/>
            <li><strong>Get Jenkins pod name</strong>
              <p>
                First we need to get the initial admin password.
                To do that we need to get the pod name of the jenkins deployment.
                Type the following command:
                <pre class="codebox"><code class="language-bash" id="sample-code">kubectl get pods --namespace=devops-tools</code></pre>
                <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
                <img src="../../images-folder/resume-website-images/get-jenkins-pod-name.png" />
              </p>
            </li>
            <br/>
            <li><strong>View Jenkins pod log</strong>
              <p>
                Now that we have the pod name, we can view the log of the jenkins pod.
                Inside the log we can find the initial admin password.
                Type the following command:
                <pre class="codebox"><code class="language-bash" id="sample-code">kubectl logs [Jenkins-pod-name] --namespace=devops-tools</code></pre>
                <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
                <img src="../../images-folder/resume-website-images/jenkins-initial-admin-password.png" />
              </p>
            </li>
            <br/>
            <li><strong>Getting started jenkins</strong>
              <p>
                Now that we have the initial admin password, we can now unlock the jenkins website.
                Enter the initial admin password and click continue.
                <img src="../../images-folder/resume-website-images/unlock-jenkins.png" />
              </p>
            </li>
            <br/>
            <li><strong>Customize jenkins</strong>
              <p>
                Click on install suggested plugins and wait for the plugins to be installed.
                <img src="../../images-folder/resume-website-images/jenkins-suggested-plugins.png" />
                <img src="../../images-folder/resume-website-images/jenkins-suggested-plugins-installing.png" />
              </p>
            </li>
            <br/>
            <li><strong>Create first admin user</strong>
              <p>
                Create your first admin user.
                Input your username, password, full name and email.
                Save and continue.
                <img src="../../images-folder/resume-website-images/jenkins-first-admin.png" />
              </p>
            </li>
            <br/>
            <li><strong>Instance configuration</strong>
              <p>
                Click on save and finish.
                <img src="../../images-folder/resume-website-images/jenkins-instance-configuration.png" />
              </p>
            </li>
            <br/>
            <li><strong>jenkins is ready</strong>
              <p>
                Click start using jenkins.
                <img src="../../images-folder/resume-website-images/start-using-jenkins.png" />
              </p>
            </li>
            <br/>
            <li><strong>New item</strong>
              <p>
                Click on new item, to create a new pipeline.
                <img src="../../images-folder/resume-website-images/jenkins-new-item.png" />
              </p>
            </li>
            <br/>
            <li><strong>New freestyle project</strong>
              <p>
                Input the name of the project and click freestyle project.
                For my example I have named it resume-website.
                After that click ok.
                <img src="../../images-folder/resume-website-images/jenkins-freestyle-project.png" />
              </p>
            </li>
            <br/>
            <li><strong>Source code management</strong>
              <p>
                Click on source code management and select git.
                Input the repository url.
                For my example it would be:
                <pre class="codebox"><code class="language-bash" id="sample-code">https://github.com/angpenghian/Resume-website</code></pre>
                <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
                <br/>
                and select the branch you want to build, for my example it would be main.
                <img src="../../images-folder/resume-website-images/jenkins-source-code-management.png" />
              </p>
            </li>
            <br/>
            <li><strong>Build triggers</strong>
              <p>
                Click on build triggers and select GitHub hook trigger for GITScm polling.
                Click save.
                <img src="../../images-folder/resume-website-images/jenkins-build-triggers.png" />
              </p>
            </li>
            <br/>
            <li><strong>GitHub settings</strong>
              <p>
                Now we need to setup the GitHub settings.
                Click on the GitHub settings tab.
                <img src="../../images-folder/resume-website-images/github-settings.png" />
              </p>
            </li>
            <br/>
            <li><strong>GitHub webhooks</strong>
              <p>
                Click on the GitHub webhooks tab.
                <img src="../../images-folder/resume-website-images/github-webhooks.png" />
                <br/>
                Click on add webhook.
                <img src="../../images-folder/resume-website-images/github-add-webhooks.png" />
                <br/>
                Enter the payload url, for my example it would be:
                http://jenkins.angpenghian.com:32000/github-webhook/
                <img src="../../images-folder/resume-website-images/github-payload-url.png" />
                <br/>
                Under which events would you like to trigger this webhook? select let me select individual events.
                <img src="../../images-folder/resume-website-images/github-select-event.png" />
                <br/>
                Under the individual events, select push and pull request.
                <img src="../../images-folder/resume-website-images/github-select-push-pull-request.png" />
                <br/>
                Once done click on add webhook.
              </p>
            </li>
            <br/>
            <li><strong>Jenkins test</strong>
              <p>
                Go back to jenkins and click on build now.
                <img src="../../images-folder/resume-website-images/jenkins-build-now.png" />
                <br/>
                You should see the build successful if you have followed the steps correctly.
                <img src="../../images-folder/resume-website-images/jenkins-build-now-successful.png" />
              </p>
            </li>
            <br/>
            <li><strong>Jenkins last build steps</strong>
              <p>
                Click on configure, select the build steps and Add build step.
                Enter the following commands into the execute shell:
                <pre class="codebox"><code class="language-bash" id="sample-code">scp -r /var/jenkins_home/workspace/resume-website/website/* ec2-user@<masternode-public-ip>:/home/ec2-user/website/</code></pre>
                <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
                <img src="../../images-folder/resume-website-images/jenkins-configure.png" />
                <img src="../../images-folder/resume-website-images/jenkins-build-steps.png" />
                <img src="../../images-folder/resume-website-images/jenkins-execute-shell.png" />
              </p>
            </li>
            <br/>
            <li><strong>Change ec2-user password for masternode and node01</strong>
              <p>
                Following the previous steps first SSH into the masternode and node01.
                Once you are in the masternode and node01, type the following command:
                <pre class="codebox"><code class="language-bash" id="sample-code">sudo passwd ec2-user</code></pre>
                <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
                <br/>
                Enter the new password and confirm the new password.
                <img src="../../images-folder/resume-website-images/passwd-masternode.png" />
                <img src="../../images-folder/resume-website-images/passwd-node01.png" />
              </p>
            </li>
            <br/>
            <li><strong>Get jenkins pod name</strong>
              <p>
                Now we need to create a secret for the jenkins pods to access the nginx deployment.
                First SSH into the masternode and type the following command:
                <pre class="codebox"><code class="language-bash" id="sample-code">kubectl get pods --namespace=devops-tools</code></pre>
                <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
                <img src="../../images-folder/resume-website-images/get-jenkins-pod-name.png" />
              </p>
            </li>
            <br/>
            <li><strong>SSH into jenkins pod</strong>
              <p>
                Copy the jenkins pod name and SSH into the jenkins pod.
                Type the following command:
                <pre class="codebox"><code class="language-bash" id="sample-code">kubectl exec -it [jenkins-pod-name] --namespace=devops-tools -- /bin/bash</code></pre>
                <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
                <img src="../../images-folder/resume-website-images/jenkins-exec-pod.png" />
              </p>
            </li>
            <br/>
            <li><strong>Keygen for jenkins pod</strong>
              <p>
                Now that we are inside the jenkins pod, we need to create a secret.
                Type the following command:
                <pre class="codebox"><code class="language-bash" id="sample-code">ssh-keygen</code></pre>
                <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
                <br/>
                When prompted for the file in which to save the key, press Enter. This accepts the default file location.
                When prompted, enter a passphrase for the key. You can also leave the passphrase blank.
                <img src="../../images-folder/resume-website-images/jenkins-ssh-keygen.png" />
              </p>
            </li>
            <br/>
            <li><strong>Copy ssh-copy-id for jenkins pod</strong>
              <p>
                Now we need to copy the public key to the jenkins pod.
                Type the following command:
                <pre class="codebox"><code class="language-bash" id="sample-code">ssh-copy-id ec2-user@masternode-public-ip</code></pre>
                <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
                <br/>
                Enter the password for the ec2-user.
                Do the same for other nginx nodes.
                <img src="../../images-folder/resume-website-images/jenkins-ssh-copy-id.png" />
              </p>
            </li>
            <br/>
            <li><strong>Testing CI/CD function</strong>
              <p>
                Now that we have setup the CI/CD pipeline, we can test it.
                As you can see from the image below, as im writing this the live website is still on the old version.
                <img src="../../images-folder/resume-website-images/old-website.png" />
                <br/>
                Now we can make a change to the website and push it to the github repository.
                <img src="../../images-folder/resume-website-images/html-changes.png" />
                <br/>
                Type the following commands to push the changes to the github repository:
                <pre class="codebox"><code class="language-bash" id="sample-code">git add .</code></pre>
                <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
                <pre class="codebox"><code class="language-bash" id="sample-code">git commit -m 'update'</code></pre>
                <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
                <pre class="codebox"><code class="language-bash" id="sample-code">git push</code></pre>
                <button class="copy-code-button" onclick="copyCodeToClipboard(this)"><i class="fa-regular fa-clipboard"></i> Copy Code</button>
              </p>
            </li>
            <br/>
          </ol>
        </div>
      </div>
    </div>
    <!----------------------------------------contact---------------------------------------->
    <div id="contact">
      <div class="copyright">
        <p>Copyright ⓒ PengHian Ang</p>
      </div>
    </div>
    <!----------------------------------------scripts---------------------------------------->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/components/prism-html.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-git.min.js"></script>
    <script src="main.js"></script>
    <!------------------------------to top button------------------------------>
    <button onclick="topFunction()" id="topBtn" title="Go to top">
      <iconify-icon icon="icon-park-outline:to-top"></iconify-icon>
    </button>
  </body>
</html>